{
  config,
  pkgs,
  ...
}: {
  programs.autorandr = let
    dpi_hd = 96;
    dpi_uhd = 216;
    set_dpi = dpi: "echo 'Xft.dpi: ${toString dpi}' | ${pkgs.xorg.xrdb}/bin/xrdb -merge";
    eDP-1 = "00ffffffffffff0006afeb3000000000251b0104a5221378020925a5564f9b270c50540000000101010101010101010101010101010152d000a0f0703e803020350058c11000001852d000a0f07095843020350025a51000001800000000000000000000000000000000000000000002001430ff123caa8f0e29aa202020003e";
    # AStA config as function as we want to enable it for two different setups
    asta_conf = {
      DP-1-1,
      DP-1-2,
    }: {
      fingerprint = {
        inherit eDP-1 DP-1-1 DP-1-2;
      };
      config = {
        eDP-1 = {
          enable = true;
          primary = true;
          mode = "3840x2160";
          position = "0x0";
          gamma = "1";
        };
        DP-1-1 = {
          enable = true;
          mode = "1920x1080";
          position = "3840x0";
          rate = "60";
          gamma = "1";
        };
        DP-1-2 = {
          enable = true;
          mode = "1920x1080";
          position = "5760x0";
          rate = "60";
          gamma = "1";
        };
      };
      hooks.postswitch = set_dpi dpi_hd;
    };
  in {
    enable = true;

    profiles.AStA_links = asta_conf {
      # AStA linker arbeitsplatz linker Monitor
      DP-1-1 = "00ffffffffffff000472ed0688687101111e010380351e782aa135a35b4fa327115054b30c00714f818081c081009500b300d1c001012a4480a070382740082098040f282100001a023a801871382d40582c45000f282100001e000000fd00304b1e5512000a202020202020000000fc00423234375920430a202020202001cf020327f14b9002030411121300001f01230907078301000065030c001000681a00000101304be6023a801871382d40582c45000f282100001e8c0ad08a20e02d10103e96000f2821000018011d007251d01e206e2855000f282100001e8c0ad090204031200c4055000f282100001800000000000000000000000000000000d0";
      # AStA linker arbeitsplatz rechter Monitor
      DP-1-2 = "00ffffffffffff000472ed0682687101111e010380351e782aa135a35b4fa327115054b30c00714f818081c081009500b300d1c001012a4480a070382740082098040f282100001a023a801871382d40582c45000f282100001e000000fd00304b1e5512000a202020202020000000fc00423234375920430a202020202001d5020327f14b9002030411121300001f01230907078301000065030c001000681a00000101304be6023a801871382d40582c45000f282100001e8c0ad08a20e02d10103e96000f2821000018011d007251d01e206e2855000f282100001e8c0ad090204031200c4055000f282100001800000000000000000000000000000000d0";
    };
    profiles.AStA_rechts = asta_conf {
      # AStA rechter arbeitsplatz linker Monitor
      DP-1-1 = "00ffffffffffff000472ed068d687101111e010380351e782aa135a35b4fa327115054b30c00714f818081c081009500b300d1c001012a4480a070382740082098040f282100001a023a801871382d40582c45000f282100001e000000fd00304b1e5512000a202020202020000000fc00423234375920430a202020202001ca020327f14b9002030411121300001f01230907078301000065030c001000681a00000101304be6023a801871382d40582c45000f282100001e8c0ad08a20e02d10103e96000f2821000018011d007251d01e206e2855000f282100001e8c0ad090204031200c4055000f282100001800000000000000000000000000000000d0";
      # AStA rechter arbeitsplatz rechter Monitor
      DP-1-2 = "00ffffffffffff000472ed0680687101111e010380351e782aa135a35b4fa327115054b30c00714f818081c081009500b300d1c001012a4480a070382740082098040f282100001a023a801871382d40582c45000f282100001e000000fd00304b1e5512000a202020202020000000fc00423234375920430a202020202001d7020327f14b9002030411121300001f01230907078301000065030c001000681a00000101304be6023a801871382d40582c45000f282100001e8c0ad08a20e02d10103e96000f2821000018011d007251d01e206e2855000f282100001e8c0ad090204031200c4055000f282100001800000000000000000000000000000000d0";
    };
    profiles = {
      laptop = {
        fingerprint = {
          inherit eDP-1;
        };
        config = {
          eDP-1 = {
            enable = true;
            primary = true;
            mode = "3840x2160";
            position = "0x0";
            gamma = "1";
          };
        };
        hooks.postswitch = set_dpi dpi_uhd;
      };
      home_laptop = {
        fingerprint = {
          inherit eDP-1;
          # Acer Predator Main Monitor
          DP-1 = "00ffffffffffff00047290046bd08073261b0103803c227806ee91a3544c99260f505421080001010101010101010101010101010101565e00a0a0a029503020350056502100001a000000ff0023415350377974452f36413764000000fd001e9022de3b000a202020202020000000fc00584232373148550a202020202001750203204143030201230907018301000067030c001000007867d85dc40178c8005aa000a0a0a046503020350056502100001a6fc200a0a0a055503020350056502100001a6be600a0a0a0425030203a0056502100001e5a8700a0a0a03b503020350056502100001a1c2500a0a0a011503020350056502100001a00000000003c";
        };
        config = {
          eDP-1 = {
            enable = true;
            primary = true;
            mode = "3840x2160";
            position = "2560x0";
            gamma = "1";
          };
          DP-1 = {
            enable = true;
            mode = "2560x1440";
            position = "0x0";
            rate = "144";
            gamma = "1";
          };
        };
        hooks.postswitch = set_dpi dpi_hd;
      };
      home_desktop = {
        fingerprint = {
          # Acer Predator Main Monitor
          DP-4 = "00ffffffffffff00047290046bd08073261b0103803c227806ee91a3544c99260f505421080001010101010101010101010101010101565e00a0a0a029503020350056502100001a000000ff0023415350377974452f36413764000000fd001e9022de3b000a202020202020000000fc00584232373148550a202020202001750203204143030201230907018301000067030c001000007867d85dc40178c8005aa000a0a0a046503020350056502100001a6fc200a0a0a055503020350056502100001a6be600a0a0a0425030203a0056502100001e5a8700a0a0a03b503020350056502100001a1c2500a0a0a011503020350056502100001a00000000003c";
          DVI-D-0 = "00ffffffffffff004162850302ae60342e17010380301b78ca3935a25952a1270c5054bfef80714f8140818081c081009500b300d1c0023a801871382d40582c4500dd0c1100001e000000fd00384c1f5311000a202020202020000000fc00566973656f32323344580a2020000000ff004432524545303035383531300a00ed";
          HDMI-0 = "00ffffffffffff004c2d200d594d5a5a1c1a010380341d782a9315a655519c27115054bfef80714f81c0810081809500a9c0b3000101023a801871382d40582c450009252100001e000000fd00324b1e5111000a202020202020000000fc00533234463335300a2020202020000000ff0048345a483730383333310a202001ca020311b14690041f13120365030c001000011d00bc52d01e20b828554009252100001e8c0ad090204031200c4055000925210000188c0ad08a20e02d10103e9600092521000018000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000051";
        };
        config = {
          DP-4 = {
            enable = true;
            primary = true;
            mode = "2560x1440";
            position = "1920x720";
            gamma = "1";
            rate = "144";
          };
          DVI-D-0 = {
            mode = "1920x1080";
            position = "0x0";
            rate = "60.00";
          };
          HDMI-0 = {
            mode = "1920x1080";
            position = "0x1080";
            rate = "60.00";
          };
        };
        hooks.postswitch = set_dpi dpi_hd;
      };
    };
  };
}
